# 目录结构与代码构成
请看下边目录结构图
![目录结构图](http://static.zybuluo.com/shenguotao/kj7ki087ibdnjkseopkcn9f5/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F.png)

小程序的代码有四种文件类型构成：
* .json 小程序的配置文件
* .wxml 小程序的结构文件
* .wxss 小程序的样式文件
* .js 小程序的书写逻辑的文件

## JSON配置文件
在小程序中配置文件又分为以下四种：
* project.config.json
* app.json
* pages.json
* component.json

### project.config.json
它是开发者工具和小程序项目的共同配置文件，它可以在多个开发者中维护统一的开发设置和开发环境。例如编辑器的颜色、ES6转ES5、上传代码时自动压缩、是否校验不合法域名、版本库等等。
当新的开发者下载了开发者工具后，只需要将团队中的 project.config.json 文件拷贝到本地小程序的根目录中即可。
更多请前往 [传送门](https://developers.weixin.qq.com/miniprogram/dev/devtools/projectconfig.html)

### app.json
他是小程序的全局配置文件，可以设置小程序的页面，窗口，tab栏，网络超时，debug,插件，分包，多线程等。  
其中常用的是pages, window以及tabBar。
pages用于配置小程序的页面路径，其值是一个数组，数组中的第一个元素就是小程序的主页，并且在开发工具中新增一个路径时，编辑器会自动创建对应页面的目录以及文件。

```json
{
    "pages": [
        "pages/index/index",
        "pages/logs/logs"
    ]
}
```  

### pages.json
每个页面都有自己的 pages.json 文件。
pages.json 文件可以在全局配置 app.json 的基础上对页面进一步的进行设置。例如导航栏的颜色，标题文字等。
另外 pages.json 还可以通过 usingComponents 字段来声明当前页面引用了那些自定义组件。

### componet.json
componet.json 是自定义组件的配置文件。
```json
{
    "component": true, //自定义组件声明
    "usingComponents": {}  //可选项，用于引用别的组件
}
```

## wxml模板文件  

你可以将 WXML 等同于传统 WEB开发时用到的 html，他们都是用来描述页面的结构骨架，不同的是 HTML文件由一个个html标记(Tag)组成，而 WXML则是有与之类似的“组件”组成。
除了在结构特性上与 HTML一致外，WXML 文件还支持特定的模版语法，数据绑定，事件处理、自定义模版等等。
同样的 WXML也可以分为页面的 WXML文件，自定义模版的 WXML文件以及自定义组件中的 WXML文件。

## wxss 样式文件

wxss 具有大部分 CSS的功能，所以你可以像 CSS一样去编写小程序的样式文件。
对于整个小程序公用的样式，可以放置在 app.wxss 文件中，而对于页面专用的样式，则写到对应页面的 pages.wxss文件中，其次便是自定义组件也会含有自己的 component.wxss文件。

## JS 脚本文件
在小程序的脚本文件中，我们可以处理事件，响应用户请求，获取接口数据，改变数据状态...并且小程序的脚本文件默认支持commonJS规范，可以直接通过 require() 来导入模块，module.exports 导出模块，就编码的角度而言，与我们普通编写脚本文件并没有什么太大的区别，如果非要说区别的话，就是小程序中的脚本可以调用小程序内置的一些API接口，例如授权，支付等。

同样的app.js用于存放全局的数据和方法，而 pages.js 则存放每个页面自己的数据和方法，对于组件中的脚本文件而言，它保存的则是组件自己的数据和方法  

## 小程序的执行流程

![小程序执行流程图](http://static.zybuluo.com/shenguotao/p8hi5pllqkv63whwad5h836t/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B.png)    
当微信客户端打开一个小程序的时候，会将整个小程序的代码包下载到本地，然后通过读取 app.json文件获取页面的路径，并将第一条路径作为首页，并根据 app.json 中的配置来初始化小程序窗口的样式。

紧接着，微信客户端再将 app.js 装载进来，执行其中的 App() 方法，实例化一个小程序对象（整个微信小程序也只有一个这样的实例对象，并且全部页面共享该对象，你可以在每个页面使用 getApp()方法来获取）。

当小程序实例对象创建完成后，会触发生命周期中的 onLaunch() 函数，然后继续装载小程序中的每个页面（默认便是首页），在装载页面的时候，同样的会先装载 pages.json的代码，用来初始化页面与窗口的样式，然后再装载 WXML文件以及其使用到的资源（wxs，模版、组件）来生成页面结构，一切就绪再加载 wxss获取页面样式，最后再去装载 .js的脚本文件。

当最后的 .js文件也被装载进来后， 就会调用脚本中的Page()构造函数，还回一个页面的实例对象，页面实例对象创建好后，就会根据其中的 data 数据与 WXML文件中的内容 一起渲染出最终的页面，最后页面渲染完成后，并且在这一过程中，页面实例会根据不同时期的状态触发不同的页面生命周期函数。

明白小程序的基本执行流程，对后面了解小程序执行的生命周期非常有帮助。